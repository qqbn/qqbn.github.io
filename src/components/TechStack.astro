---
import content from "../content/about/techstack.json"
import html from "../assets/icons/html-icon.svg";
import css from "../assets/icons/css-icon.svg";
import javascript from "../assets/icons/javascript-icon.svg";
import jquery from "../assets/icons/jquery-icon.svg";
import typescript from "../assets/icons/jquery-icon.svg";
import vue from "../assets/icons/vue-icon.svg";
import nuxt from "../assets/icons/nuxt-icon.svg";
import pinia from "../assets/icons/pinia-icon.svg";
import vuetify from "../assets/icons/vuetify-icon.svg";
import node from "../assets/icons/node-icon.svg";
import express from "../assets/icons/express-icon.svg";
import nest from "../assets/icons/nest-icon.svg";
import prisma from "../assets/icons/prisma-icon.svg";
import mysql from "../assets/icons/mysql-icon.svg";
import axios from "../assets/icons/axios-icon.svg";
import php from "../assets/icons/php-icon.svg";
import laravel from "../assets/icons/laravel-icon.svg";
import astro from "../assets/icons/astro-icon.svg";
import bootstrap from "../assets/icons/bootstrap-icon.svg";
import git from "../assets/icons/git-icon.svg";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

interface slide {
    icon: ImageMetadata,
    link: string | null,
}

const technologiesSlider: slide[] = [
    { icon: html, link: null },
    { icon: css, link: null },
    { icon: javascript, link: null },
    { icon: jquery, link: 'https://jquery.com/' },
    { icon: typescript, link: 'https://www.typescriptlang.org/' },
    { icon: vue, link: 'https://vuejs.org/' },
    { icon: nuxt, link: 'https://nuxt.com/' },
    { icon: pinia, link: 'https://pinia.vuejs.org/' },
    { icon: vuetify, link: 'https://vuetifyjs.com/en/' },
    { icon: node, link: 'https://nodejs.org/en' },
    { icon: express, link: 'https://expressjs.com/' },
    { icon: nest, link: 'https://nestjs.com/' },
    { icon: prisma, link: 'https://www.prisma.io/orm' },
    { icon: mysql, link: null },
    { icon: axios, link: 'https://axios-http.com/' },
    { icon: php, link: null },
    { icon: laravel, link: 'https://laravel.com/docs/11.x/blade' },
    { icon: astro, link: 'https://astro.build/' },
    { icon: bootstrap, link: 'https://getbootstrap.com/' },
    { icon: git, link: null }
];
---
<script>
import Glide from '@glidejs/glide'

    const glide = new Glide('.glide',{
        autoplay: 1000,
        perView: 4,
        rewind: true,
        gap: 15,
        breakpoints:{
            768:{
                perView: 3
            },
            480:{
                perView: 2,
            }
       }
    });

    glide.mount();
</script>
<div class="tech-stack">
    <div class="list-wrapper">
        {content.technologies.map(arr => (
            <ul class="tech-list">
                {arr.map(tech => (
                    <li class="tech"><span class="tech-name">{tech}</span></li>
                ))}
            </ul>
        ))}
    </div>
    <p class="montserrat-regular">
        {content.info}
    </p>
    <div class="glide">
        <div class="glide__track" data-glide-el="track">
          <ul class="glide__slides">
            {technologiesSlider.map(tech => (
                <li class="glide__slide">
                    {tech.link ? 
                        <a href={tech.link ? tech.link : '#'}>
                            <Image class="icon" title="Tech icon" src={tech.icon} alt="Tech icon" />
                        </a> 
                    : 
                        <div>
                            <Image class="icon" title="Tech icon" src={tech.icon} alt="Tech icon" />
                        </div>
                    }
                </li>
            ))}
          </ul>
        </div>
    </div>
</div>
<style lang="scss" scoped>
    .tech-stack{
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        flex-direction: column;
        row-gap: 30px;
        width: 100%;
        color: var(--white);
    }

    .list-wrapper{
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        column-gap: 30px;
    }

    .tech{
        cursor: pointer;
    }

    .tech-icon{
        display: none;
        position: absolute;
        max-width: 150px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        background: rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 10px;
        transition: background 0.5s;
    }

    .glide__track{
        position: relative;
        padding: 20px 0;
        border-top: 2px solid white;
        border-bottom: 2px solid white;
    }

    .glide__slide{
        padding: 20px 10px;
        display: flex;
        justify-content: center;
        background-color: #826AED;
        border-radius: 8px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        margin: 10px 0;

        img{
            height: 75px;
            width: auto;
        }
    }

    @media(max-width: 1024px){
        .list-wrapper{
            flex-wrap: wrap;
            width: 100%;
        }
    }

    @media(max-width: 768px){
        .list-wrapper{
            flex-wrap: wrap;
            column-gap: 0;
        }

        .tech-list{
            width: 50%;
        }
    }

    

    @media(max-width: 480px){
        .tech-stack{
            p{
                text-align: justify;
            }
        }
    }
</style>